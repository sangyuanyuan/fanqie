<include: file="header_init.html">
<link rel="stylesheet" href="../html/calendar.css" type="text/css">

<BODY  style="PADDING-RIGHT: 0px; PADDING-LEFT: 0px; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px" >
<style>

div.titleholder {
	font-family: ms sans serif, arial;
	font-size: 8pt;
	width: 200;
	text-overflow: ellipsis;
	margin: 0px;
	overflow: hidden;
	white-space: nowrap;			
}		
div.subtitleholder {
	font-family: ms sans serif, arial;
	font-size: 8pt;
	
	text-overflow: ellipsis;
	margin: 0px;
	overflow: hidden;
	white-space: nowrap;			
}
div.timeholder {
	font-family: ms sans serif, arial;
	font-size: 8pt;
	width: 90;
	text-overflow: ellipsis;
	margin: 0px;
	overflow: hidden;
	white-space: nowrap;			
}	
</style>
<script language='JavaScript'>
var doImage = doImage;
var TType = TType;

function mhHover(tbl, idx, cls)
{
	var t, d;
	if (document.getElementById)
		t = document.getElementById(tbl);
	else
		t = document.all(tbl);
	if (t == null) return;
	if (t.getElementsByTagName)
		d = t.getElementsByTagName("TD");
	else
		d = t.all.tags("TD");
	if (d == null) return;
	if (d.length <= idx) return;
	d[idx].className = cls;
}

</script>
<SCRIPT>
var elo;
var loadmenuok=false;
var type = 'main';
var NodeID = '[$NodeInfo.NodeID]';
var TableID = '[$IN.TableID]';
function initrightmenu(){
	loadmenuok = true;
}




function addThread(url,TaskID) {
	top.CrawlerTaskFrame.addThread(url , TaskID)
	
}

function doing(action, IndexID) {
	var returnValue;
	switch(action) {

		case 'addContentLink':
  			parent.window.opener.picker_content_add(parent.picker_content_topFrame.fieldName, IndexID)
 			break;
		case 'viewpublish':
			eval('var mPath = URL_' + IndexID + '.href');
			window.open(mPath,"","")

			break;
		case 'getURL':
			eval('var mPath = URL_' + IndexID + '.href');
			prompt("{lang:doc_publish_url}",mPath);
			break;
		case 'display_record':
			document.location = "admin_publish.php?sId=[$sId]&o=picker_content&extra=ui_main&NodeID=" + NodeID + "&offset=" + document.documentlist.offset.value;
			break;

		case 'date_search':
			var DateString = document.getElementById('dTime');
			document.location = "admin_search.php?sId=[$sId]&o=search&Tpl=content_picker_content_search.html&TableID="+ TableID +"&NodeID=[$IN.NodeID]" + "&offset=[$IN.offset]" +  "&Date=" + DateString.value;
			//alert(document.location);
			break;
		case 'keyword_search':
			var KeywordsString = document.getElementById('SearchKeywords');
			document.location = "admin_search.php?sId=[$sId]&o=search&Tpl=content_picker_content_search.html&TableID="+ TableID +"&NodeID=[$IN.NodeID]"  + "&offset=[$IN.offset]"  + "&Field=all&Keywords=" + KeywordsString.value ;
			break;
		case 'search_pro':
			var KeywordsString = document.getElementById('SearchKeywords');
			document.location = "admin_search.php?sId=[$sId]&Tpl=content_picker_content_search.html&TableID="+ TableID +"&NodeID=[$IN.NodeID]"  + "&offset=[$IN.offset]"  + "&Field=all&Keywords=" + KeywordsString.value ;

	}
	//sId=6891856b84ee23f2330ee8359cd3f60d&o=view&type=main&pId=41&cId=4
}



</SCRIPT>
<script type="text/javascript" src="../html/calendar.js"></script>
<script type="text/javascript">
Calendar._DN = new Array
("<?echo $_LANG_SKIN['Sunday']; ?>",
 "<?echo $_LANG_SKIN['Monday']; ?>",
 "<?echo $_LANG_SKIN['Tuesday']; ?>",
 "<?echo $_LANG_SKIN['Wednesday']; ?>",
 "<?echo $_LANG_SKIN['Thursday']; ?>",
 "<?echo $_LANG_SKIN['Friday']; ?>",
 "<?echo $_LANG_SKIN['Saturday']; ?>",
 "<?echo $_LANG_SKIN['Sunday']; ?>");
Calendar._MN = new Array
("<?echo $_LANG_SKIN['January']; ?>",
 "<?echo $_LANG_SKIN['February']; ?>",
 "<?echo $_LANG_SKIN['March']; ?>",
 "<?echo $_LANG_SKIN['April']; ?>",
 "<?echo $_LANG_SKIN['May']; ?>",
 "<?echo $_LANG_SKIN['June']; ?>",
 "<?echo $_LANG_SKIN['July']; ?>",
 "<?echo $_LANG_SKIN['August']; ?>",
 "<?echo $_LANG_SKIN['September']; ?>",
 "<?echo $_LANG_SKIN['October']; ?>",
 "<?echo $_LANG_SKIN['November']; ?>",
 "<?echo $_LANG_SKIN['December']; ?>");

Calendar._TT = {};
Calendar._TT["TOGGLE"] = "Toggle first day of week";
Calendar._TT["PREV_YEAR"] = "<?echo $_LANG_SKIN['Last_year']; ?>  ";
Calendar._TT["PREV_MONTH"] = "<?echo $_LANG_SKIN['Last_month']; ?>  ";
Calendar._TT["GO_TODAY"] = "<?echo $_LANG_SKIN['Today']; ?>";
Calendar._TT["NEXT_MONTH"] = "<?echo $_LANG_SKIN['Next_month']; ?>  ";
Calendar._TT["NEXT_YEAR"] = "<?echo $_LANG_SKIN['Next_year']; ?>  ";
Calendar._TT["SEL_DATE"] = "<?echo $_LANG_SKIN['select_date']; ?>";
Calendar._TT["DRAG_TO_MOVE"] = "Drag to move";
Calendar._TT["PART_TODAY"] = " <?echo $_LANG_SKIN['Today1']; ?>";
Calendar._TT["MON_FIRST"] = "Display Monday first";
Calendar._TT["SUN_FIRST"] = "Display Sunday first";
Calendar._TT["CLOSE"] = "<?echo $_LANG_SKIN_GLOBAL['close']; ?>";
Calendar._TT["TODAY"] = "<?echo $_LANG_SKIN['Today']; ?>";
</script>
<script type="text/javascript">

var calendar = null; // remember the calendar object so that we reuse it and
                     // avoid creation other calendars.

// code from http://www.meyerweb.com -- change the active stylesheet.
function setActiveStyleSheet(title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  }
  document.getElementById("style").innerHTML = title;
  return false;
}

// This function gets called when the end-user clicks on some date.
function selected(cal, date) {
  cal.sel.value = date; // just update the date in the input field.
  if (cal.sel.id == "sel1" || cal.sel.id == "sel3" || cal.sel.id == "sel5" || cal.sel.id == "sel7")
    // if we add this call we close the calendar on single-click.
    // just to exemplify both cases, we are using this only for the 1st
    // and the 3rd field, while 2nd and 4th will still require double-click.
    cal.callCloseHandler();
}

// And this gets called when the end-user clicks on the _selected_ date,
// or clicks on the "Close" button.  It just hides the calendar without
// destroying it.
function closeHandler(cal) {
  cal.hide();                        // hide the calendar

  // don't check mousedown on document anymore (used to be able to hide the
  // calendar when someone clicks outside it, see the showCalendar function).
  Calendar.removeEvent(document, "mousedown", checkCalendar);
}

// This gets called when the user presses a mouse button anywhere in the
// document, if the calendar is shown.  If the click was outside the open
// calendar this function closes it.
function checkCalendar(ev) {
  var el = Calendar.is_ie ? Calendar.getElement(ev) : Calendar.getTargetElement(ev);
  for (; el != null; el = el.parentNode)
    // FIXME: allow end-user to click some link without closing the
    // calendar.  Good to see real-time stylesheet change :)
    if (el == calendar.element || el.tagName == "A") break;
  if (el == null) {
    // calls closeHandler which should hide the calendar.
    calendar.callCloseHandler();
    Calendar.stopEvent(ev);
  }
}

// This function shows the calendar under the element having the given id.
// It takes care of catching "mousedown" signals on document and hiding the
// calendar if the click was outside.
function showCalendar(id, format) {
  var el = document.getElementById(id);
  if (calendar != null) {
    // we already have some calendar created
    calendar.hide();                 // so we hide it first.
  } else {
    // first-time call, create the calendar.
    var cal = new Calendar(true, null, selected, closeHandler);
    calendar = cal;                  // remember it in the global var
    cal.setRange(1900, 2070);        // min/max year allowed.
    cal.create();
  }
  calendar.setDateFormat(format);    // set the specified date format
  calendar.parseDate(el.value);      // try to parse the text in field
  calendar.sel = el;                 // inform it what input field we use
  calendar.showAtElement(el);        // show the calendar below it

  // catch "mousedown" on document
  Calendar.addEvent(document, "mousedown", checkCalendar);
  return false;
}

var MINUTE = 60 * 1000;
var HOUR = 60 * MINUTE;
var DAY = 24 * HOUR;
var WEEK = 7 * DAY;

// If this handler returns true then the "date" given as
// parameter will be disabled.  In this example we enable
// only days within a range of 10 days from the current
// date.
// You can use the functions date.getFullYear() -- returns the year
// as 4 digit number, date.getMonth() -- returns the month as 0..11,
// and date.getDate() -- returns the date of the month as 1..31, to
// make heavy calculations here.  However, beware that this function
// should be very fast, as it is called for each day in a month when
// the calendar is (re)constructed.
function isDisabled(date) {
  var today = new Date();
  return (Math.abs(date.getTime() - today.getTime()) / DAY) > 10;
}

function flatSelected(cal, date) {
  var el = document.getElementById("preview");
  el.innerHTML = date;
}

function showFlatCalendar() {
  var parent = document.getElementById("display");

  // construct a calendar giving only the "selected" handler.
  var cal = new Calendar(true, null, flatSelected);

  // We want some dates to be disabled; see function isDisabled above
  cal.setDisabledHandler(isDisabled);
  cal.setDateFormat("DD, M d");

  // this call must be the last as it might use data initialized above; if
  // we specify a parent, as opposite to the "showCalendar" function above,
  // then we create a flat calendar -- not popup.  Hidden, though, but...
  cal.create(parent);

  // ... we can show it here.
  cal.show();
}
</script>

<script>
var mousemovecolor="#D4D4D4";
var selectcolor ="#DDDDDD";
var oldcolor;

function GetRow(oElem)
{
	while (oElem)
	{	//alert(oElem.tagName.toLowerCase())
		if (oElem.tagName.toLowerCase() == "tr" || oElem.parentElement.tagName.toLowerCase() == "tbody") 
		    return oElem;
		if (oElem.tagName.toLowerCase() == "table" || oElem.tagName.toLowerCase() == "th") return false;
		oElem = oElem.parentElement;
	}
}



</script>
<div id="msviLocalToolbar">
  <table cellpadding="0" cellspacing="2" width="100%" height="19" border="0">
   <form action="" method="get"> <tr> 
       
      <td height="20" align="right" nowrap="nowrap" >{lang:search_by_date}:</td>
	  <td height="20" align="left" nowrap="nowrap"   > 
        <INPUT TYPE="text" NAME="dTime" size=12   id="dTime" onFocus="return showCalendar('dTime', 'y-mm-dd');" value="[$IN.Date]" > 
        <INPUT name="Go" TYPE="button" value="Go" onclick="doing('date_search')">
      </td>
      <td height="20" align="right" nowrap="nowrap" >{lang:search_by_keyword}: </td>
	  <td   height="20" nowrap="nowrap" > <INPUT TYPE="text" NAME="SearchKeywords" id="SearchKeywords" size=18 value="[$IN.Keywords]"> 
        <INPUT name="Go" TYPE="button"  value="Go" onclick="doing('keyword_search')">

   </td>
   <td> <img src="../html/images/search.gif" border="0" style="cursor:hand"  title="{lang::global:search_pro}" onclick="doing('search_pro')"/><span  title="{lang::global:search_pro}" onclick="doing('search_pro')" style="cursor:hand">{lang:search_pro}</span></td>
   
        
   
   </tr></form>
  </table>
</div>
<table width="100%" border="0" align="center" cellpadding="2" cellspacing="1"  class="table_border" >
  <TBODY>
  <form method="post" action="[$base_url]type=main&NodeID=[$NodeInfo.NodeID]" name="documentlist" >

    <tr class="table_td2"> 
  <td align="center"><B>ID</B></td>	  
<loop $DisplayItem key=key var=var>
		<td align="center"><B>[$var.FieldTitle]</B></td>
	  </loop>
   </tr>
 
<loop $pList key=key var=var>
	  
	  <tr class="table_td1" id="[$var.IndexID]" onmouseover='this.style.backgroundColor="#FFFFFF"' 
                    onmouseout='this.style.backgroundColor=""'> 
       <td align="center" noWrap   ><div class="subtitleholder" style="cursor:hand"  onclick="doing('addContentLink','[$var.IndexID]')" >[$var.IndexID]</div></td>
 	 <loop $DisplayItem key=keyIn var=varIn>
      <td   noWrap  style="cursor:hand" id="[$var.pId]">

 	  <A HREF="javascript:void(0);"  id="Title_[$var.IndexID]" onclick="doing('addContentLink','[$var.$varIn:FieldName]')" class="o" style="cursor:hand"     title="[$var.$varIn:FieldName]">[$var.$varIn:FieldName]</A>   
 </td>
   </loop>

  </tr>
</loop>

    <tr class="Tablelistbg"> 
      <td colspan="14" align="left" bgcolor="#F5F5F5"> <table border="0" align="center"  cellpadding="0" cellspacing="0" width="100%">
          <tr> 
            <td align=left> 
            
            </td>
			<!--<td height="20" align="right" nowrap="nowrap"> <INPUT name="go_display" TYPE="button" value="{lang:display}" onclick="doing('display_record')" ></td>
	  <td   height="20" nowrap="nowrap" align="right"  width=80> &nbsp;&nbsp;<INPUT TYPE="text" NAME="offset" size=1 value="[$IN.offset]"> {lang:display_record} 
       
   </td>-->
          </tr>
        </table></td>
    </tr>
	<INPUT TYPE="hidden" name="referer" value ="" >
  </form>
  <tr class="table_td1"> 
    <td colspan="13" height=25 >
	<table border=0 align="right">
	<tr>
	<td align=right>
	 
	&nbsp;[@sprintf(#lang:record#, $searchResultInfo.page  , $searchResultInfo.pageNum, $offset, $searchResultInfo.from, $searchResultInfo.too, $searchResultInfo.recordNum )] [$pagelist] &nbsp;&nbsp;&nbsp;&nbsp;
	</td>
	
	</tr>
	</table>
	 </td>
  </tr>  
  </tbody> 
</table>

<include: file="footer.html">
